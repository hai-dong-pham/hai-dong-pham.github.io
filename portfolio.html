<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.17.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Portfolio - Hai Pham</title>
<meta name="description" content="Hai Pham's Portfolio ">


  <meta name="author" content="Hai Pham">


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Hai Pham's portfolio">
<meta property="og:title" content="Portfolio">
<meta property="og:url" content="https://hai-dong-pham.github.io/">


  <meta property="og:description" content="Hai Pham's Portfolio ">



  <meta property="og:image" content="https://github.com/hai-dong-pham/hai-dong-pham.github.io/blob/master/assets/img/notre-dame.jpg">








  

  


<link rel="canonical" href="https://hai-dong-pham.github.io/portfolio">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Hai Pham",
      "url": "https://hai-dong-pham.github.io/"
    
  }
</script>


  <meta name="google-site-verification" content="v4DTrYOO1JCGDyFYkTQANpSTh5i19K2Fqjm5DurJj9w" />





<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Hai Pham Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="theme-color" content="#ffffff">

<!-- Download Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=EB+Garamond:400,400i,500,500i,700,700i&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i&display=swap" rel="stylesheet">

<!-- end custom head snippets -->



  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/img/top-left-name.jpg" alt=""></a>
        
        <a class="site-title" href="/">
           
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="https://hai-dong-pham.github.io/portfolio" >Portfolio</a>
            </li><li class="masthead__menu-item">
              <a href="https://hai-dong-pham.github.io/hobbies" >Hobbies</a>
            </li><li class="masthead__menu-item">
              <a href="https://hai-dong-pham.github.io/" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">

      
      
      
      
      
      


<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://hai-dong-pham.github.io/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Portfolio</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/img/Hai photo.jpg" alt="Hai Pham" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Hai Pham</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p><i>Boy from border region,<br /> ex-investment banker,<br /> now coder.</i></p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
        
          
            <li><a href="mailto:phamhai067@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/haidongpham/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
          
        
          
            <li><a href="https://github.com/hai-dong-pham" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
           
         
          
        
          
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Portfolio">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Portfolio
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-bookmark"></i> Table of Contents</h4></header>
              <ul class="toc__menu">
  <li><a href="#customer-churn-prediction">Project 1: Customer Churn Prediction with Machine Learning</a>              
  <li><a href="#delivery-route-optimization">Project 2: Delivery Route Optimization for E-commerce Businesses</a>
      <ul>
      <li><a href="#looking at the data">Data Exploration</a></li>
      <li><a href="#data cleaning">Data cleaning</a></li>
      <li><a href="#modeling">Modeling</a></li>
      <li><a href="#conclusion">Conclusion</a></li>
    </ul>
  </li>
</ul>

            </nav>
          </aside>
        
        <h2 id="customer-churn-prediction">Project 1: Customer Churn Prediction with Machine Learning</h2>
<p>Customer retention is key to sustainable growth for Software-as-a-Service (SaaS) companies since the cost of retaining existing customers is much less than acquiring new ones. Customers, however, now retract their loyalty more quickly than they did a few years ago. Therefore, identifying factors that affect customers’ decision on canceling a subscription is becoming increasingly crucial for these firms. </p> 

<p>My goal is to develop a prediction model using Machine Learning that helps those firms identify customers that are likely to discontinue their services so that those firms can take necessary actions to retain their current customers. Due to unavailability of customer data of SaaS companies, I searched for similar data in other industries to use in this project and came up with a dataset of a telecommunication firm on Kaggle. With subscription-based business of telecommunication, this customer dataset would be a good alternative to that of SaaS. The inputs for this project would be customer’s historical behaviors. Based on those data a classification model is trained and then used to predict if certain customers are going to discontinue services in the near future. <strong>R</strong> is the tool leveraged for this project. </p>        

<h3 id="Data Exploration">Data Exploration</h3>

<p>Load packages and dataset </p>        

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">library</span><span class="nn">(</span><span class="n">dplyr</span><span class="nn">)</span>       
<span class="kn">library</span><span class="nn">(</span><span class="n">ggplot2</span><span class="nn">)</span>
<span class="kn">library</span><span class="nn">(</span><span class="n">reshape2</span><span class="nn">)</span>
<span class="kn">library</span><span class="nn">(</span><span class="n">glmnet</span><span class="nn">)</span>
<span class="kn">library</span><span class="nn">(</span><span class="n">plotmo</span><span class="nn">)</span>
<span class="kn">library</span><span class="nn">(</span><span class="n">tidyverse</span><span class="nn">)</span>
<span class="kn">library</span><span class="nn">(</span><span class="n">caret</span><span class="nn">)</span>
</code></pre></div></div>   
        
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tele_data</span> <span class="o">=</span> <span class="n">read_csv</span><span class="nn">(</span><span class="s">'C:/Users/Hai Pham/Desktop/Telecom dataset.csv'</span><span class="nn">)</span>  
</code></pre></div></div> 

<p>Take a look at the structure of dataset. </p>
        
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">str</span><span class="nn">(</span><span class="n">tele_data</span><span class="nn">)</span>
</code></pre></div></div> 

<p class="small text-center"><img src="assets/Customer Churn/Tele_data_str.JPG" width="680" class="align-center" />
<em>Dataset structure</em></p>

<p>The dataset used for this project includes customers’ usage data of a telecomcomunications company, Orange S.A. (“Orange”), and is publicly available on Kaggle. The dataset consists of 3,333 observations, each of which describes features of a unique customer. There are 20 variables, 19 of which are customers’ demographic and usage data and 1 churn label specifying whether a customer continues or discontinues Orange ’s services. There are no missing values in this dataset. </p>        

<p>Based upon the structure function above, it is obvious that State and Area code are identifiers and thus have no explanatory power. Churn would be the response variable and the other 17 variables are explanatory variables. Let's visualize the distribution of response variable. </p>        

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tele_data</span> <span class="o">%>%</span> <span class="k">ggplot</span><span class="nn">(</span><span class="k">aes</span><span class="nn">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">Churn, </span><span class="n">fill</span> <span class="o">=</span> <span class="n">Churn</span><span class="nn">))</span> <span class="o">+
              </span><span class="k">geom_bar</span><span class="nn">()</span> <span class="o">+
              </span><span class="k">theme_set</span><span class="nn">(</span><span class="n">theme_bw</span><span class="nn">(</span><span class="n">base_size</span> <span class="o">=</span> <span class="mi">22</span><span class="nn">) )</span> <span class="o">+
              </span><span class="k">theme</span><span class="nn">(</span><span class="n">panel.grid.major</span> <span class="o">=</span> <span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.grid.minor</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.border</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.background</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">() )</span> <span class="o">+
              </span><span class="k">labs</span><span class="nn">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">"Do customers churn?"</span><span class="n">, fill</span><span class="o">=</span> <span class="s">"Churn"</span><span class="nn">)</span>   
</code></pre></div></div>                                                                                                                                 

<p class="small text-center"><img src="assets/Customer Churn/churn variable.JPG" width="680" class="align-center" />
<em>Response variable distribution</em></p>  

<p>This is an imbalanced dataset with 2,850 No values and 483 Yes values in response variable. This imbalance issue should be taken into account in modeling step. As a preliminary analysis we can visualize how features vary for customers that continue and discontinue services. </p>  
        
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plot_dat</span> <span class="o"><-</span> <span class="n">tele_data
</span><span class="n">plot_dat</span><span class="nn">$</span><span class="n">Churn</span> <span class="o"><-</span> <span class="n">as.factor</span><span class="nn">(</span><span class="n">plot_dat</span><span class="nn">$</span><span class="n">Churn</span><span class="nn">)
</span><span class="k">ggplot</span><span class="nn">(</span><span class="n">plot_dat, </span><span class="k">aes</span><span class="nn">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">Account.length, fill </span><span class="o">=</span> <span class="n">Churn</span><span class="nn">))</span> <span class="o">+
</span><span class="k">geom_density</span><span class="nn">(</span><span class="n">alpha<span class="o"> = <span class="mi">0.5</span><span class="nn">)</span> <span class="o">+
</span><span class="k">theme_set</span><span class="nn">(</span><span class="n">theme_bw</span><span class="nn">(</span><span class="n">base_size</span> <span class="o">=</span> <span class="mi">22</span><span class="nn">) )</span> <span class="o">+
</span><span class="k">theme</span><span class="nn">(</span><span class="n">panel.grid.major</span> <span class="o">=</span> <span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.grid.minor</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.border</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.background</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">() )</span> <span class="o">+
</span><span class="k">labs</span><span class="nn">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">"Account length - Churn vs Non Churn"</span><span class="n">, fill </span><span class="o">=</span> <span class="s">"Churn"</span><span class="nn">)</span> <span class="o">+
</span><span class="k">scale_fill_manual</span><span class="nn">(</span><span class="n">values</span> <span class="o">=</span> <span class="n">c</span><span class="nn">(</span><span class="s">"Yes"</span> <span class="o">=</span> <span class="s">"red"</span><span class="n">, </span><span class="s">"No"</span> <span class="o">=</span> <span class="s">"blue"</span><span class="nn">)</span><span class="n">,
                  </span><span class="n">labels</span> <span class="o">=</span> <span class="n">c</span><span class="nn">(</span><span class="s">"Yes"</span> <span class="o">=</span> <span class="s">"Churn"</span><span class="n">, </span><span class="s">"No"</span> <span class="o">=</span> <span class="s">"Non-churn"</span><span class="nn">))</span>  
</code></pre></div></div>         
        
<p class="small text-center"><img src="assets/Customer Churn/account length vs churn.JPG" width="680" class="align-center" />
        
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ggplot</span><span class="nn">(</span><span class="n">plot_dat, </span><span class="k">aes</span><span class="nn">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">Customer.service.calls, fill </span><span class="o">=</span> <span class="n">Churn</span><span class="nn">))</span> <span class="o">+
</span><span class="k">geom_density</span><span class="nn">(</span><span class="n">alpha<span class="o"> = <span class="mi">0.5</span><span class="nn">)</span> <span class="o">+
</span><span class="k">theme_set</span><span class="nn">(</span><span class="n">theme_bw</span><span class="nn">(</span><span class="n">base_size</span> <span class="o">=</span> <span class="mi">22</span><span class="nn">) )</span> <span class="o">+
</span><span class="k">theme</span><span class="nn">(</span><span class="n">panel.grid.major</span> <span class="o">=</span> <span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.grid.minor</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.border</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.background</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">() )</span> <span class="o">+
</span><span class="k">labs</span><span class="nn">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">"Customer service calls - Churn vs Non Churn"</span><span class="n">, fill </span><span class="o">=</span> <span class="s">"Churn"</span><span class="nn">)</span> <span class="o">+
</span><span class="k">scale_fill_manual</span><span class="nn">(</span><span class="n">values</span> <span class="o">=</span> <span class="n">c</span><span class="nn">(</span><span class="s">"Yes"</span> <span class="o">=</span> <span class="s">"red"</span><span class="n">, </span><span class="s">"No"</span> <span class="o">=</span> <span class="s">"blue"</span><span class="nn">)</span><span class="n">,
                  </span><span class="n">labels</span> <span class="o">=</span> <span class="n">c</span><span class="nn">(</span><span class="s">"Yes"</span> <span class="o">=</span> <span class="s">"Churn"</span><span class="n">, </span><span class="s">"No"</span> <span class="o">=</span> <span class="s">"Non-churn"</span><span class="nn">))</span>  
</code></pre></div></div>   

<p class="small text-center"><img src="assets/Customer Churn/customer service call.JPG" width="680" class="align-center" />

<p>From the above density plots, we can tell that there is not really a difference in account length between customer continuing and customer discontinuing services. However, the second plot indicates that customers churning services give more calls to customer services than customer continuing subscription plan. </p>          
        
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">m_dat</span> <span class="o"><-</span> <span class="k">melt<span class="nn">(</span><span class="n">plot_dat, is.vars</span> <span class="o">=</span> <span class="s">"Churn"</span><span class="nn">)
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span> <span class="o"><-</span> <span class="k">rep</span><span class="nn">(</span><span class="s">"Total.day.minutes"</span><span class="n">, nrow</span><span class="nn">(</span><span class="n">m_dat<span class="nn">))
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.day.calls"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Day Calls"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.day.charge"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Day Charge"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.eve.minutes"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Evening Minutes"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.eve.calls"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Evening Calls"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.eve.charge"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Evening Charge"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.night.minutes"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Night Minutes" 
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.night.calls"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Night Calls" 
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.night.charge"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total Night Charge"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.intl.minutes"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total International Minutes"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.intl.calls"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total International Calls"
</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">var_2</span><span class="nn">[</span><span class="n">which</span><span class="nn">(</span><span class="n">m_dat</span><span class="nn">$</span><span class="n">variable</span> <span class="o">==</span> <span class="s">"Total.intl.charge"</span><span class="nn">)] <span class="o"><-</span> <span class="s">"Total International Charge"

</span><span class="k">ggplot</span><span class="nn">(</span><span class="n">m_dat, </span><span class="k">aes</span><span class="nn">(</span><span class="n">y</span> <span class="o">=</span> <span class="n">value, x <span class="o">=</span> Churn, fill </span><span class="o">=</span> <span class="n">Churn</span><span class="nn">))</span> <span class="o">+
</span><span class="k">geom_boxplot</span><span class="nn">()</span> <span class="o">+
</span><span class="k">face_wrap</span><span class="nn">(~</span><span class="n">var_2, scales </span> <span class="o">=</span> <span class="s">"free"<span class="nn">)</span> <span class="o">+
</span><span class="k">theme_wrap</span><span class="nn">()</span> <span class="o">+
</span><span class="k">theme</span><span class="nn">(</span><span class="n">panel.grid.major</span> <span class="o">=</span> <span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.grid.minor</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.border</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">()</span><span class="n">,</span>
                    </span><span class="n">panel.background</span> <span class="o">=</span> </span><span class="n">element_blank</span><span class="nn">() )</span> <span class="o">+
</span><span class="k">labs</span><span class="nn">(</span><span class="n">title</span> <span class="o">=</span> <span class="s">"Churn vs Non Churn"</span><span class="n">, fill </span><span class="o">=</span> <span class="s">"Churn?"</span><span class="nn">)</span> <span class="o">+
</span><span class="k">scale_fill_manual</span><span class="nn">(</span><span class="n">values</span> <span class="o">=</span> <span class="n">c</span><span class="nn">(</span><span class="s">"Yes"</span> <span class="o">=</span> <span class="s">"red"</span><span class="n">, </span><span class="s">"No"</span> <span class="o">=</span> <span class="s">"blue"</span><span class="nn">)</span><span class="n">,
                  </span><span class="n">labels</span> <span class="o">=</span> <span class="n">c</span><span class="nn">(</span><span class="s">"Yes"</span> <span class="o">=</span> <span class="s">"Yes"</span><span class="n">, </span><span class="s">"No"</span> <span class="o">=</span> <span class="s">"No"</span><span class="nn">))</span>  
</code></pre></div></div>           

<p class="small text-center"><img src="assets/Customer Churn/boxplot.JPG" width="680" class="align-center" />

<p>The above boxplots show that Total Day Charge, Total Day Minutes, Total Evening Minutes, Total International Charge, and Total International Minutes of customers churning service tend to be higher than those of customer continuing services. Now that we get a good sense of response variable distribution and impact of certain features on the response variable, let's move to the modeling process. </p>

<h3 id="Modeling">Modeling</h3>

<p>Split the data into train/test sets with 80% of observations for train dataset and 20% of observations for test dataset. </p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">set.seed</span><span class="nn">(</span><span class="mi">101</span><span class="nn">)
</span><span class="n">sample</span> <span class="o">=</span> <span class="k">sample.int</span><span class="nn">(</span><span class="n">n</span> <span class="o">=</span> <span class="n">nrow</span><span class="nn">(</span><span class="n">tele_data</span><span class="nn">)</span><span class="n">, size</span> <span class="o">=</span> <span class="n">floor</span><span class="nn">(</span><span class="mi">.8</span><span class="nn">*</span><span class="n">nrow</span><span class="nn">(</span><span class="n">tele_data</span><span class="nn">))</span><span class="n">, replace</span> <span class="o">=</span> <span class="nn">FALSE)          
</span><span class="n">train</span> <span class="o">=</span> <span class="n">tele_data</span><span class="nn">[</span><span class="n">sample, </span> <span class="nn">]
</span><span class="n">test</span> <span class="o">=</span> <span class="n">tele_data</span><span class="nn">[-</span><span class="n">sample, </span> <span class="nn">]</span>       
</code></pre></div></div>

<p>The response variable is a binary variable and classification problem is being solved so logistic regression is a good approach. The 
logistic regression is a statistical model that uses a logistic function to model the binary response 
variable, returning probabilities that customers will discontinue services. Let's develop a logistic regression model based on training set of 80% observations. </p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fit_total</span> <span class="o"><-</span> <span class="k">glm</span><span class="nn">(</span><span class="n">Churn</span> <span class="nn">~</span> <span class="n">.,
                 </span><span class="n">family</span> <span class="o">=</span> <span class="n">binomial</span><span class="nn">(</span><span class="n">link</span> <span class="o">=</span> <span class="s">'logit'</span><span class="nn">)</span><span class="n">,    
                 </span><span class="n">data</span> <span class="o">=</span> <span class="n">train</span><span class="nn">)
</span><span class="k">summary</span><span class="nn">(</span><span class="n">fit_total</span><span class="nn">)</span>       
</code></pre></div></div>

<p class="small text-center"><img src="assets/Customer Churn/logistic output.JPG" width="680" class="align-center" />
<em>Logistic regression output</em></p> 

<p>The quality of fit of logistic is evaluated based on its Akaike Information Criterion (AIC). The 
best fit model according to AIC is the one that explains the greatest amount of variation using the 
fewest possible independent variables. Therefore, the lower AIC, the better the model is. The above model achieves an AIC of 1,800.4. Out of 17 coefficients, there are 4 ones that have p-values lower than 0.05, which means that 
they are statistically different from zero and can help explain the response variable. Those 4 
coefficients go with the following variables: International Plan, Voice Mail Plan, Total 
International Calls, and Customer Service Calls. However, when a new model is run with only 
those 4 variables, AIC increases from 1,800.4 to 1,932.4. Therefore, the best model trained from 
the training set should be the one above with AIC of 1,800.4.</p>

<p>The model performance is then evaluated by comparing its predictive values with actual values 
in the test set. The metric that is selected for this classification problem is Accuracy. The model 
obtains an accuracy rate of 87.9% when it is used to predict response variables of test set. Below 
is the Confusion Matrix when we run the model against the test set. </p> 

<p class="small text-center"><img src="assets/Customer Churn/Confusion Matrix.JPG" width="480" class="align-center" />
<em>Confusion Matrix</em></p> 

<p>Given pretty good accuracy rate of 87.9%, the above model overcomes the issue of imblanced data in the training set and thus can be leveraged to predict customers that are likely to churn going forward. </p>


        <h2 id="delivery-route-optimization">Project 2: Delivery Route Optimization for E-commerce Businesses</h2>

<p>Given the boom in e-commerce, delivery service plays a vital part in creating competitive advantages and is key to minizing cost for businesses as well. E-commerce firms, whose thousands of warehouses are distributed nationwide, always want to minimize the distance to deliver goods from a warehouse to a customer. That being said, selecting which warehouse to take goods and deliver to a specific customer is the first thing to consider. Excel Solver can previously be used for this task. The strong expansion of e-commerce firms, however, inevitably leads to larger dataset over time that makes it hard for Excel to handle. To overcome this challenge, I believe <strong>Python</strong> is the way to go. </p>

<p>With that idea in mind, I undertook a pilot project that leveraged Python to optimize the delivery route between warehouse and a sample of customer. Due to the availability of data, I decided to choose Costco as a proxy for business with hundreds of warehouses and Starbuck stores as a sample of customers. These dataset were obtained from Kaggle.com. </p>  

<h3 id="looking at the data">Data Exploration</h3>       
        
<p>Let's get started with loading packages we are going to use in this project. </p>
               
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="nn">geopy</span> <span class="kn">import</span> <span class="n">distance</span>
</code></pre></div></div>          
  
<p>Load the datasets. </p> 
        
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">costco_raw_data</span> <span class="o">=</span> <span class="n">pd.read_csv</span><span class="p">(</span><span class="s">r'C:\Users\Hai Pham\Desktop\Delivery Optimization Project\costco warehouse.csv'</span><span class="p">)</span>
<span class="n">starbuck_raw_data</span> <span class="o">=</span> <span class="n">pd.read_csv</span><span class="p">(</span><span class="s">r'C:\Users\Hai Pham\Desktop\Delivery Optimization Project\starbuck.csv'</span><span class="p">)</span>                               
</code></pre></div></div>        
        
<p>The first dataset includes information on 782 Costco warehouses and the second one contains details about 25,600 Starbuck store worldwide. Below are some first rows of those datasets and links to download entire datasets: </p>        
                   
<p class="small text-center"><img src="assets/Delivery Optimization/10-row-starbuck.jpg" width="680" class="align-center" />
<em>A few first rows of Starbuck dataset</em></p>
        
<p class="small text-center"><img src="assets/Delivery Optimization/10-row-costco.jpg" width="680" class="align-center" />
<em>A few first rows of Costco dataset</em></p>
          
<p class="text-center"><a href="assets/Delivery Optimization/costco warehouse.csv" class="btn btn--info">Costco Dataset</a> <a href="assets/Delivery Optimization//starbuck.csv" class="btn btn--info">Starbuck Dataset</a> </p>                  

<h3 id="data cleaning">Data Cleaning</h3>             
        
<p>Due to limited CPU processing power, I decided to cover only US-based Costco warehouses and a sample of Starbuck stores nationwide. Both datasets were then cleaned and unnecessary columns were taken out. </p> 

<p>Filter Costco warehouses which are based in the US and select necessary columns for this project. We obtained 543 Costco warehouses around the US.</p>         

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">costco_raw_data1</span> <span class="o">=</span> <span class="n">costco_raw_data[costco_raw_data[</span><span class="s">'country'</span><span class="p">] == </span><span class="s">'US'</span><span class="p">]</span> 
<span class="n">costco</span> <span class="o">=</span> <span class="n">costco_raw_data1.loc[:, [</span><span class="s">'stlocID'</span><span class="p">,</span><span class="s"> 'city'</span><span class="p">,</span><span class="s"> 'state'</span><span class="p">,</span><span class="s"> 'latitude'</span><span class="p">,</span><span class="s"> 'longitude'</span><span class="p">]]</span>                                
</code></pre></div></div>
        
<p>Filter a random sample of 100 Starbuck stores which are based in the US and select necessary columns for this project.</p>
               
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">starbuck_raw_data1</span> <span class="o">=</span> <span class="n">starbuck_raw_data[starbuck_raw_data[</span><span class="s">'Country'</span><span class="p">] == </span><span class="s">'US'</span><span class="p">]</span> 
<span class="n">starbuck</span> <span class="o">=</span> <span class="n">starbuck_raw_data1.loc[:, [</span><span class="s">'Store Number'</span><span class="p">,</span><span class="s"> 'City'</span><span class="p">,</span><span class="s"> 'State/Province'</span><span class="p">,</span><span class="s"> 'Latitude'</span><span class="p">,</span><span class="s"> 'Longitude'</span><span class="p">]]</span>                                
<span class="n">starbuck_100</span> <span class="o">=</span> <span class="n">starbuck.sample(n</span> <span class="o">= </span><span class="mi">100</span><span class="n">, </span><span class="n">random_state </span><span class="o">=</span><span class="mi"> 5</span><span class="n">)</span>                              
</code></pre></div></div>        

<h3 id="modeling">Modeling</h3>         
        
<p>I then used <code class="language-plaintext highlighter-rouge">for</code> loop to pair each Starbuck store with all Costco warehouses and calculate their associated distance based on their latitude and longitude using <code class="language-plaintext highlighter-rouge">distance</code> function. The output was stored in a dictionary called <code class="language-plaintext highlighter-rouge">final</code>.</p> 

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Construct a dictionary to store final output
</span><span class="n">final </span><span class="o">=</span> <span class="n">{</span><span class="s">'Starbuck_store_id'</span><span class="p">: [],</span><span class="s"> 'Costco_warehouse_id'</span><span class="p">: [], </span><span class="s">'Distance'</span><span class="p">: []}
</span>                            
<span class="c1"># Use for loop to calculate the distance from each Starbuck store to all Costco warehouses.
</span><span class="k">for</span><span class="n"> starbuck_id </span><span class="k">in</span><span class="n"> starbuck_100[</span><span class="s">'Store Number'</span><span class="n">]:
    </span><span class="k">for</span><span class="n"> costco_id</span><span class="k"> in</span><span class="n"> costco[</span><span class="s">'stlocID'</span><span class="n">]:
        </span><span class="n">starbuck_store </span><span class="o">= </span><span class="n">starbuck_100[starbuck_100[</span><span class="s">'Store Number' </span><span class="n">] == starbuck_id]
        </span><span class="n">costco_warehouse </span><span class="o">= </span><span class="n">costco[costco[</span><span class="s">'stlocID'</span><span class="n">] == costco_id]</span>
               
        <span class="n">starbuck_store_location</span><span class="o"> = </span><span class="n">(starbuck_store[</span><span class="s">'Latitude'</span><span class="n">].values, starbuck_store[</span><span class="s">'Longitude'</span><span class="n">].values)</span>                             
        <span class="n">costco_warehouse_location</span><span class="o"> = </span><span class="n">(costco_warehouse[</span><span class="s">'latitude'</span><span class="n">].values, costco_warehouse[</span><span class="s">'longitude'</span><span class="n">].values)</span>

        <span class="n">dist</span><span class="o"> = </span><span class="n">distance.distance(starbuck_store_location, costco_warehouse_location).miles</span>
        
        <span class="n">final[</span><span class="s">'Starbuck_store_id'</span><span class="n">].append(starbuck_id)</span>
        <span class="n">final[</span><span class="s">'Costco_warehouse_id'</span><span class="n">].append(costco_id)</span>
        <span class="n">final[</span><span class="s">'Distance'</span><span class="n">].append(dist)</span>
</code></pre></div></div>    
        
<p>The model paired 100 Starbuck stores with all 543 Costco warehouses, leading to 54,300 pairs. I then sorted this output into ascending order of distance to come up with Costco warehouse that is closest to each Starbuck store, obtaining a final outcome of 100 paris. Costco warehouse in each pair was the one selected to take goods and deliver to its associated Starbuck store. </p>        

       
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">final_dataframe</span><span class="o"> = </span><span class="n">pd.DataFrame(final)</span>
<span class="n">final_dataframe</span><span class="o"> = </span><span class="n">final_dataframe.sort_values(by=[</span><span class="s">'Starbuck_store_id'</span><span class="p">,</span><span class="s">'Distance'<span class="n">], ascending</span><span class="o"> = </span><span class="mi">True</span><span class="n">)</span>
<span class="n">final_dataframe</span><span class="o"> = </span><span class="n">final_dataframe.groupby(<span class="s">'Starbuck_store_id'</span><span class="n">).head(</span><span class="mi">1</span><span class="n">)</span>

<span class="n">final_dataframe.to_csv(</span><span class="s">'final.csv'</span><span class="n">)</span>
</code></pre></div></div>  

<p>Let's take a look at the first 10 rows of the final output. </p>
  
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">final_dataframe.head(n</span><span class="o"> = </span><span class="mi">10</span><span class="n">)</span>
</code></pre></div></div> 
  
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: left;">
      <th>Starbuck_store_id</th>
      <th>Costco_warehouse_id</th>
      <th>Distance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>10015-169504</td>
      <td>401</td>
      <td>6.346432</td>
    </tr>
    <tr>
      <td>10330-99342</td>
      <td>97</td>
      <td>7.462301</td>
    </tr>
    <tr>
      <td>10691-100498</td>
      <td>1333</td>
      <td>11.866416</td>
    </tr>
    <tr>
      <td>10694-100468</td>
      <td>1350</td>
      <td>4.410591</td>
    </tr>
    <tr>
      <td>10707-9255</td>
      <td>110</td>
      <td>8.544519</td>
    </tr>
    <tr>
      <td>11548-102139</td>
      <td>1211</td>
      <td>7.803099</td>
    </tr>
    <tr>
      <td>11569-103415</td>
      <td>689</td>
      <td>11.280080</td>
    </tr>
    <tr>
      <td>13214-103798 </td>
      <td>465</td>
      <td>4.344910</td>
    </tr>
    <tr>
      <td>14192-110304</td>
      <td>693</td>
      <td>2.047501</td>
    </tr>
    <tr>
      <td>14296-114267</td>
      <td>729</td>
      <td>3.899803</td>
    </tr>
  </tbody>
</table> 

<p>Here are links to download full Python code and final output file: </p>  
<p class="text-center"><a href="assets/Delivery Optimization/delivery project code_Hai Pham.py" class="btn btn--info">Python Code</a> <a href="assets/Delivery Optimization//final.csv" class="btn btn--info">Output File</a> </p>          
  
<h3 id="conclusion">Conclusion</h3>    
<p>Based on the output, Costco could make data-driven decisions on delivery to those Starbuck stores. Python was leveraged to facilitate robust data analytics process which was hard for Excel given its limited data processing.  </p>


<hr />


        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
          
          <li><a href="mailto:phamhai067@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
          <li><a href="https://www.linkedin.com/in/haidongpham/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
          <li><a href="https://github.com/hai-dong-pham" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
       
        
      
    

  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Hai Pham. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <script>
  window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
  ga('create','UA-145578661-1','auto');
  ga('set', 'anonymizeIp', false);
  ga('send','pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async></script>












  </body>
</html>
